<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Let's Celebrate with Cake!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="shared.css" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      .particle {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        pointer-events: none;
        opacity: 0.8;
        z-index: -1;
      }

      /* Sparkling stars */
      .star {
        position: absolute;
        width: 3px;
        height: 3px;
        background-color: white;
        border-radius: 50%;
        animation: twinkle 1.5s infinite alternate;
        z-index: -1;
      }

      @keyframes twinkle {
        0% {
          opacity: 0.2;
          transform: scale(1);
        }
        100% {
          opacity: 1;
          transform: scale(1.5);
        }
      }

      /* rainbow heading removed -- single dark-emerald heading below will be used */

      @keyframes glow {
        from {
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.5),
            0 0 20px rgba(255, 255, 255, 0.3);
        }
        to {
          text-shadow: 0 0 20px rgba(255, 255, 255, 0.7),
            0 0 30px rgba(255, 255, 255, 0.5);
        }
      }

      .cake-container {
        position: relative;
        width: 300px;
        height: 300px;
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        transition: transform 0.3s ease;
        z-index: 10;
      }

      .cake-container:hover {
        transform: translateY(-10px);
      }

      .click-message {
        position: absolute;
        top: -80px; /* moved higher above the cake */
        font-size: 1.05rem;
        color: #fffbe6;
        background: linear-gradient(135deg, #d94a8a, #ff9ecd);
        padding: 8px 18px;
        border-radius: 26px;
        border: 2px solid rgba(255, 255, 255, 0.12);
        box-shadow: 0 8px 30px rgba(217, 74, 138, 0.18),
          0 2px 8px rgba(0, 0, 0, 0.45);
        opacity: 0;
        transform: translateY(6px) scale(0.98);
        transition: all 0.35s cubic-bezier(0.2, 0.9, 0.2, 1);
        animation: bounce 2s ease infinite;
      }

      .cake-container:hover .click-message {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .cake {
        position: relative;
        width: 250px;
        height: 250px;
        transform-style: preserve-3d;
        transform: perspective(1000px) rotateX(5deg);
        transition: transform 0.3s ease;
        filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.3));
      }

      .cake:hover {
        transform: perspective(1000px) rotateX(5deg) scale(1.05);
      }

      .layer {
        position: absolute;
        width: 100%;
        background: linear-gradient(to right, #ff9ecd, #ff71b6);
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .layer-1 {
        height: 80px;
        bottom: 0;
        width: 250px;
        background: linear-gradient(to right, #ff71b6, #ff9ecd);
      }

      .layer-2 {
        height: 70px;
        bottom: 80px;
        width: 220px;
        left: 15px;
        background: linear-gradient(to right, #ffb7e0, #ff8ac7);
      }

      .layer-3 {
        height: 60px;
        bottom: 150px;
        width: 190px;
        left: 30px;
        background: linear-gradient(to right, #ffc4e6, #ffa3d4);
      }

      .frosting {
        position: absolute;
        width: 20px;
        height: 30px;
        background: white;
        border-radius: 50%;
        top: -15px;
        filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1));
      }

      .candle {
        position: absolute;
        width: 20px;
        height: 60px;
        background: linear-gradient(to right, #fff, #ffd1e3);
        top: -60px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 10px;
        z-index: 10;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      }

      .flame {
        position: absolute;
        width: 20px;
        height: 30px;
        background: linear-gradient(to bottom, #ffec82, #ff9d00, #ff5e00);
        border-radius: 50% 50% 20% 20%;
        top: -25px;
        animation: flicker 1s infinite;
        filter: drop-shadow(0 0 15px #ff9d00);
      }

      .balloon {
        position: fixed;
        width: 60px;
        height: 70px;
        top: 110%;
        border-radius: 50%;
        filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
        animation: balloonRise 7s ease-in-out forwards;
        z-index: 5;
      }

      .balloon::before {
        content: "";
        position: absolute;
        width: 10px;
        height: 15px;
        background: rgba(255, 255, 255, 0.8);
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        clip-path: polygon(0 0, 100% 0, 50% 100%);
      }

      .balloon::after {
        content: "";
        position: absolute;
        width: 1px;
        height: 80px;
        background: rgba(255, 255, 255, 0.8);
        bottom: -80px;
        left: 50%;
        transform: translateX(-50%);
      }

      @keyframes balloonRise {
        0% {
          transform: translateY(0) rotate(0deg) translateX(0);
        }
        50% {
          transform: translateY(-50vh) rotate(10deg) translateX(100px);
        }
        75% {
          transform: translateY(-75vh) rotate(-10deg) translateX(-50px);
        }
        100% {
          transform: translateY(-120vh) rotate(5deg) translateX(25px);
        }
      }

      @keyframes flicker {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(0.9);
          opacity: 0.8;
        }
      }

      .smoke {
        position: absolute;
        width: 10px;
        height: 10px;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        filter: blur(5px);
        opacity: 0;
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .next-page-button {
        position: fixed;
        bottom: 40px;
        padding: 15px 40px;
        font-size: 1.2rem;
        background: linear-gradient(45deg, #ff9ecd, #ff71b6);
        border: none;
        border-radius: 25px;
        color: white;
        cursor: pointer;
        opacity: 0;
        transform: translateY(50px);
        transition: all 0.5s ease;
        box-shadow: 0 0 15px rgba(255, 113, 182, 0.5),
          0 0 30px rgba(255, 113, 182, 0.3);
        font-family: "Arial", sans-serif;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 10px;
        overflow: hidden;
      }

      .next-page-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s ease;
      }

      .next-page-button::after {
        content: "‚Üí";
        font-size: 1.4rem;
        transition: transform 0.3s ease;
      }

      .next-page-button:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 0 20px rgba(255, 113, 182, 0.6),
          0 0 40px rgba(255, 113, 182, 0.4);
        background: linear-gradient(45deg, #ffb7e0, #ff8ac7);
      }

      .next-page-button:hover::after {
        transform: translateX(5px);
      }

      .next-page-button:hover::before {
        left: 100%;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 0 15px rgba(255, 113, 182, 0.5),
            0 0 30px rgba(255, 113, 182, 0.3);
        }
        50% {
          transform: scale(1.05);
          box-shadow: 0 0 20px rgba(255, 113, 182, 0.6),
            0 0 40px rgba(255, 113, 182, 0.4);
        }
      }

      .next-page-button.show {
        opacity: 1;
        transform: translateY(0);
        animation: pulse 2s infinite;
      }

      /* Confetti animation */
      .confetti {
        position: absolute;
        width: 15px;
        height: 15px;
        top: -50px;
        z-index: 3;
      }

      @keyframes confettiFall {
        0% {
          opacity: 1;
          transform: translateY(0) rotateZ(0);
        }
        100% {
          opacity: 0.3;
          transform: translateY(100vh) rotateZ(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="vignette"></div>
    <!-- Islamic Moon and Stars Decoration -->
    <div class="islamic-decor">
      <svg
        class="crescent-moon"
        viewBox="0 0 60 60"
        width="140"
        height="140"
        aria-hidden="true"
      >
        <defs>
          <radialgradient id="moonGradient" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#fffbe6" />
            <stop offset="100%" stop-color="#bfa76f" />
          </radialgradient>
        </defs>
        <path
          d="M40 30a20 20 0 1 1-20-20 15 15 0 1 0 20 20z"
          fill="url(#moonGradient)"
        />
      </svg>
      <svg class="star star1" width="18" height="18" viewBox="0 0 24 24">
        <polygon
          fill="#b03a2e"
          points="12,2 15,10 24,10 17,15 19,23 12,18 5,23 7,15 0,10 9,10"
        />
      </svg>
      <svg class="star star2" width="12" height="12" viewBox="0 0 24 24">
        <polygon
          fill="#044538"
          points="12,2 15,10 24,10 17,15 19,23 12,18 5,23 7,15 0,10 9,10"
        />
      </svg>
      <svg class="star star3" width="14" height="14" viewBox="0 0 24 24">
        <polygon
          fill="#f7cac9"
          points="12,2 15,10 24,10 17,15 19,23 12,18 5,23 7,15 0,10 9,10"
        />
      </svg>
      <svg class="star star4" width="10" height="10" viewBox="0 0 24 24">
        <polygon
          fill="#e2b07a"
          points="12,2 15,10 24,10 17,15 19,23 12,18 5,23 7,15 0,10 9,10"
        />
      </svg>
    </div>
    <div class="quran-quotes-row">
      <div class="quran-quote quran-quote-left">
        <span class="quran-mark">Ô¥æ</span>
        <span class="quran-text">Thanks,
For being my saviour whenever I need anything ,
 For the best moments we shared and many more to come , 
For taking care of me ,
 For just being there for me no matter what the situations were 
And lastly for being my best friend üíû
.</span>
        <span class="quran-ref">‚Äî tum ho saath toh kyu rahun udaas</span>
        <span class="quran-mark">Ô¥ø</span>
      </div>
      <div class="cake-quote-spacer"></div>
      <div class="quran-quote quran-quote-right">
        <span class="quran-mark">Ô¥æ</span>
        <span class="quran-text">I wish you a very happy birthday my dear Alvii I wish and hope that May God bless you with lots of happiness , lots of Love so that you can give more love to others and the best life </span>
        <span class="quran-ref">you¬†want¬†to¬†have‚ù£üíû
</span>
        <span class="quran-mark">Ô¥ø</span>
      </div>
    </div>
    <h1 class="heading">Happy Birthday, my dear friend üéÇ</h1>
    <div class="cake-quotes-cake-row">
      <div class="quran-quotes-row-mobile">
        <div class="quran-quote quran-quote-left">
          <span class="quran-mark">Ô¥æ</span>
          <span class="quran-text">Sending you lots of love and warm hugs on your birthday! Stay blessed and keep shining like the star you are üíñ</span>
          <span class="quran-ref">‚Äî be happy always</span>
          <span class="quran-mark">Ô¥ø</span>
        </div>
        <div class="quran-quote quran-quote-right">
          <span class="quran-mark">Ô¥æ</span>
          <span class="quran-text"> May god fill your day with smiles, your heart with peace, and your life with endless blessings. You‚Äôre not just a friend ‚Äî you‚Äôre a gift from god</span>
          <span class="quran-ref">‚Äî >_<</span>
          <span class="quran-mark">Ô¥ø</span>
        </div>
      </div>
      <div class="cake-container">
        <div class="click-message" id="clickMessage">Click me!</div>
        <div class="cake" id="mainCake">
          <div class="layer layer-1">
            <div class="frosting"></div>
            <div class="frosting f-left-40"></div>
            <div class="frosting f-right-40"></div>
          </div>
          <div class="layer layer-2">
            <div class="frosting"></div>
            <div class="frosting f-left-35"></div>
            <div class="frosting f-right-35"></div>
          </div>
          <div class="layer layer-3">
            <div class="frosting"></div>
            <div class="frosting f-left-30"></div>
            <div class="frosting f-right-30"></div>
            <div class="candle" id="candle">
              <div class="flame" id="flame"></div>
            </div>
          </div>
          <div class="cake-glow"></div>
        </div>
      </div>
    </div>
    <!-- close .cake-quotes-cake-row -->
    <div id="hearts-container"></div>
    <style>
      .quran-quotes-row {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: flex-start;
        width: 100%;
        max-width: 900px;
        margin: 0 auto 6px auto; /* reduce space below quotes */
        gap: 40px;
      }
      .cake-quote-spacer {
        flex: 1 1 80px;
        min-width: 40px;
        max-width: 120px;
      }
      .cake-quotes-cake-row {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: flex-start;
        width: 100%;
        max-width: 1100px;
        margin: 0 auto 0 auto;
        gap: 0;
      }
      .quran-quotes-row-mobile {
        display: none;
      }
      @media (max-width: 900px) {
        .quran-quotes-row {
          display: none;
        }
        .cake-quotes-cake-row {
          flex-direction: column;
          align-items: center;
        }
        .quran-quotes-row-mobile {
          display: flex;
          flex-direction: column;
          gap: 18px;
          margin-bottom: 12px;
        }
      }
      .quran-quote {
        background: linear-gradient(
          135deg,
          #fff8ec 0%,
          #f7e6c9 45%,
          #6b2b3a 100%
        );
        color: #044538;
        border-radius: 36px 80px 36px 80px;
        border: 2.5px solid #d4af37; /* gold */
        box-shadow: 0 8px 36px rgba(181, 140, 50, 0.12), 0 0 0 8px #fffbe722;
        padding: 24px 32px 20px 32px;
        min-width: 240px;
        max-width: 360px;
        width: 100%;
        margin: 28px 0 18px 0;
        text-align: center;
        font-family: "Scheherazade New", "Georgia", serif;
        font-size: 1.18rem;
        letter-spacing: 0.01em;
        opacity: 0.995;
        position: relative;
        transition: box-shadow 0.25s, transform 0.25s;
        overflow: visible;
      }
      .quran-quote-left {
        background: linear-gradient(
          135deg,
          #e2b07a 0%,
          #fffbe6 80%,
          #f7cac9 100%
        );
        border-radius: 48px 32px 48px 32px;
        box-shadow: 0 8px 36px #e2b07a55, 0 0 0 10px #fffbe622;
        border-color: #d4af37;
        position: relative;
      }
      .quran-quote-right {
        background: linear-gradient(
          135deg,
          #044538 0%,
          #fffbe6 80%,
          #e2b07a 100%
        );
        border-radius: 32px 48px 32px 48px;
        box-shadow: 0 8px 36px #04453855, 0 0 0 10px #e2b07a22;
        border-color: #d4af37;
        position: relative;
      }
      .quran-quote .quran-mark {
        font-size: 2.6rem;
        color: #d4af37;
        vertical-align: middle;
        margin: 0 10px;
        font-family: "Amiri", "Scheherazade New", serif;
        text-shadow: 0 0 8px #fffbe6, 0 0 12px #d4af37aa;
      }
      .quran-quote .quran-text {
        color: #145a32;
        font-weight: bold;
        font-size: 1.28em;
        font-family: "Scheherazade New", "Georgia", serif;
        background: linear-gradient(90deg, #044538 0%, #d4af37 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 1px 0 #fffbe6;
      }
      .quran-quote .quran-ref {
        display: block;
        color: #d4af37;
        font-size: 1.08em;
        margin-top: 10px;
        font-family: "Pacifico", "Roboto", Arial, sans-serif;
        letter-spacing: 0.04em;
        text-shadow: 0 0 6px #fffbe6;
      }
      .quran-quote::before {
        content: "";
        position: absolute;
        top: -18px;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 18px;
        background: url('data:image/svg+xml;utf8,<svg width="60" height="18" viewBox="0 0 60 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 16 Q30 2 58 16" stroke="%23d4af37" stroke-width="2" fill="none"/><circle cx="30" cy="6" r="3" fill="%23d4af37"/></svg>')
          no-repeat center/contain;
        opacity: 0.7;
        pointer-events: none;
      }
      body {
        /* unified Islamic-feminine background */
        background: linear-gradient(
          120deg,
          #044538 0%,
          #136a4f 35%,
          #f7ecd0 70%,
          #6b2b3a 100%
        );
      }
      .heading {
        font-size: clamp(2rem, 6vw, 4rem);
        font-weight: 700;
        text-align: center;
        display: block;
        margin: 8px 0 6px 0; /* tighter spacing around heading */
        z-index: 250;
        line-height: 1.05;
        /* solid dark emerald for strong legibility */
        background: none;
        -webkit-background-clip: unset;
        background-clip: unset;
        -webkit-text-fill-color: unset;
        color: #044538 !important;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.45),
          0 0 10px rgba(212, 175, 55, 0.28);
      }
      .cake-container {
        margin-top: 18px; /* nudge cake down a bit */
      }
      .islamic-decor {
        position: fixed;
        top: 30px;
        left: 30px;
        z-index: 200;
        pointer-events: none;
      }
      .crescent-moon {
        filter: drop-shadow(0 0 26px #bfa76fbb);
        margin-bottom: -36px; /* increased to compensate for larger moon */
        display: block;
        transform-origin: center center;
        transform: rotate(-12deg);
        animation: moonFloat 6s ease-in-out infinite;
      }
      /* give SVG polygons a warm golden fill and soft glow */
      .star polygon {
        fill: #d4af37; /* warm gold */
        stroke: rgba(212, 175, 55, 0.12);
        stroke-width: 0.5;
        filter: drop-shadow(0 0 6px rgba(212, 175, 55, 0.18));
      }
      .star {
        position: absolute;
      }
      .star1 {
        left: 120px;
        top: 18px;
        transform: scale(1.15) rotate(6deg);
      }
      .star2 {
        left: 42px;
        top: 72px;
        transform: scale(0.9) rotate(-6deg);
      }
      .star3 {
        left: 164px;
        top: 78px;
        transform: scale(1.05) rotate(2deg);
      }
      .star4 {
        left: 190px;
        top: 42px;
        transform: scale(0.85) rotate(-8deg);
      }

      @keyframes moonFloat {
        0% {
          transform: translateY(0) rotate(-12deg);
        }
        50% {
          transform: translateY(-6px) rotate(-10deg);
        }
        100% {
          transform: translateY(0) rotate(-12deg);
        }
      }
      /* Responsive moon scaling */
      @media (max-width: 900px) {
        .crescent-moon {
          width: 100px;
          height: 100px;
          margin-bottom: -24px;
        }
        .islamic-decor {
          top: 18px;
          left: 16px;
        }
        .star1 {
          left: 92px;
          top: 12px;
        }
        .star2 {
          left: 28px;
          top: 48px;
        }
        .star3 {
          left: 120px;
          top: 58px;
        }
        .star4 {
          left: 140px;
          top: 32px;
        }
      }
      @media (max-width: 480px) {
        .crescent-moon {
          width: 72px;
          height: 72px;
          margin-bottom: -16px;
          transform: rotate(-8deg);
        }
        .islamic-decor {
          top: 12px;
          left: 12px;
        }
        .star1,
        .star2,
        .star3,
        .star4 {
          display: none;
        }
      }
      /* duplicate .quran-quote block removed to avoid selector conflicts; consolidated styles remain above */
      .vignette {
        pointer-events: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 100;
        background: radial-gradient(
          ellipse at center,
          rgba(0, 0, 0, 0) 60%,
          rgba(0, 0, 0, 0.18) 100%
        );
      }
      .cake-glow {
        position: absolute;
        left: 50%;
        top: 60%;
        width: 180px;
        height: 60px;
        background: radial-gradient(
          ellipse at center,
          #fffbe6 0%,
          #ffe082 60%,
          rgba(255, 255, 255, 0) 100%
        );
        filter: blur(18px) brightness(1.2);
        opacity: 0.7;
        transform: translate(-50%, 0);
        z-index: 0;
        pointer-events: none;
      }
      /* frosting position helpers (replacing inline styles) */
      .f-left-40 {
        left: 40px;
      }
      .f-right-40 {
        right: 40px;
      }
      .f-left-35 {
        left: 35px;
      }
      .f-right-35 {
        right: 35px;
      }
      .f-left-30 {
        left: 30px;
      }
      .f-right-30 {
        right: 30px;
      }
      #hearts-container {
        position: fixed;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 50;
      }
      .floating-heart {
        position: absolute;
        width: 32px;
        height: 32px;
        pointer-events: none;
        opacity: 0.85;
        animation: floatHeart 4s linear forwards;
      }
      @keyframes floatHeart {
        0% {
          transform: scale(0.7) translateY(0);
          opacity: 0.7;
        }
        30% {
          opacity: 1;
        }
        100% {
          transform: scale(1.2) translateY(-180px);
          opacity: 0;
        }
      }
    </style>
    <audio id="blowSound">
      <source src="blowing.mp3" type="audio/mpeg" />
    </audio>
    <audio id="bgSong" loop autoplay>
      <source src="friend.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>
    <button class="next-page-button">Continue to Next Page</button>

    <script>
      // --- Celebration Cake Interactivity ---
      const cake = document.querySelector(".cake-container");
      const candle = document.getElementById("candle");
      const flame = document.getElementById("flame");
      const blowSound = document.getElementById("blowSound");
      const clickMessage = document.getElementById("clickMessage");
      const bgSong = document.getElementById("bgSong");
      let isClicked = false;

      // Prepare background song, but do not autoplay (will play on user interaction)
      bgSong.volume = 0.5;
      function playBgSong() {
        bgSong.play().catch(() => {});
      }

      // Hide click message on mobile after a while
      setTimeout(() => {
        if (clickMessage) clickMessage.style.opacity = 0.7;
      }, 1000);

      // Create twinkling stars
      function createStars() {
        for (let i = 0; i < 50; i++) {
          const star = document.createElement("div");
          star.classList.add("star");
          star.style.left = `${Math.random() * 100}%`;
          star.style.top = `${Math.random() * 100}%`;
          star.style.animationDelay = `${Math.random() * 2}s`;
          document.body.appendChild(star);
        }
      }
      createStars();

      // Balloon colors
      const balloonColors = [
        "linear-gradient(135deg, #FF9ECD, #FF71B6)",
        "linear-gradient(135deg, #FFB7E0, #FF8AC7)",
        "linear-gradient(135deg, #FFC4E6, #FFA3D4)",
        "linear-gradient(135deg, #E0C3FC, #BDE0FE)",
        "linear-gradient(135deg, #FFCAD4, #FFD1E3)",
        "linear-gradient(135deg, #B5EAD7, #C7F9CC)",
        "linear-gradient(135deg, #FF9AA2, #FFB7B2)",
        "linear-gradient(135deg, #FFDAC1, #FFE5D9)",
        "linear-gradient(135deg, #C7CEEA, #A1C4FD)",
        "linear-gradient(135deg, #FF9D6C, #BB4E75)",
      ];
      // Confetti colors
      const confettiColors = [
        "#ff71b6",
        "#ff9ecd",
        "#ffb7e0",
        "#ff8ac7",
        "#ffc4e6",
        "#ffa3d4",
        "#e0c3fc",
        "#bde0fe",
        "#ffcad4",
        "#ffd1e3",
        "#b5ead7",
        "#c7f9cc",
        "#ff9aa2",
        "#ffb7b2",
        "#ffdac1",
        "#ffe5d9",
        "#c7ceea",
        "#a1c4fd",
        "#ff9d6C",
        "#bb4e75",
      ];

      // Create background particles
      function createBackgroundParticles() {
        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const particle = document.createElement("div");
            particle.classList.add("particle");
            particle.style.left = `${Math.random() * 100}%`;
            particle.style.top = `${Math.random() * 100}%`;
            particle.style.backgroundColor = `hsl(${
              Math.random() * 360
            }, 100%, 70%)`;
            particle.style.opacity = "0.5";
            particle.style.transform = "scale(0)";
            document.body.appendChild(particle);
            gsap.to(particle, {
              scale: 1,
              duration: 1,
              ease: "power1.out",
            });
            gsap.to(particle, {
              opacity: 0,
              duration: 3,
              delay: 2,
              ease: "power1.in",
              onComplete: () => particle.remove(),
            });
          }, i * 100);
        }
      }

      function createConfetti() {
        const confetti = document.createElement("div");
        confetti.className = "confetti";
        confetti.style.left = `${Math.random() * window.innerWidth}px`;
        // Randomly choose shape (square, rectangle, or circle)
        const shape = Math.floor(Math.random() * 3);
        if (shape === 0) {
          confetti.style.width = `${Math.random() * 10 + 5}px`;
          confetti.style.height = confetti.style.width;
          confetti.style.borderRadius = "0";
        } else if (shape === 1) {
          confetti.style.width = `${Math.random() * 15 + 5}px`;
          confetti.style.height = `${Math.random() * 10 + 5}px`;
          confetti.style.borderRadius = "0";
        } else {
          confetti.style.width = `${Math.random() * 10 + 5}px`;
          confetti.style.height = confetti.style.width;
          confetti.style.borderRadius = "50%";
        }
        confetti.style.backgroundColor =
          confettiColors[Math.floor(Math.random() * confettiColors.length)];
        document.body.appendChild(confetti);
        // Apply animation
        gsap.to(confetti, {
          y: window.innerHeight + 100,
          x: Math.random() * 200 - 100,
          rotation: Math.random() * 360,
          duration: Math.random() * 3 + 2,
          ease: "power1.out",
          onComplete: () => confetti.remove(),
        });
      }

      function createBalloon() {
        const balloon = document.createElement("div");
        balloon.className = "balloon";
        balloon.style.left = `${Math.random() * window.innerWidth}px`;
        balloon.style.background =
          balloonColors[Math.floor(Math.random() * balloonColors.length)];
        document.body.appendChild(balloon);
        // Random wobble animation
        gsap.to(balloon, {
          x: `${Math.random() * 100 - 50}px`,
          duration: 2,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
        });
        balloon.addEventListener("animationend", () => {
          balloon.remove();
        });
      }

      function createSmoke() {
        if (!candle) return;
        const smoke = document.createElement("div");
        smoke.className = "smoke";
        // Position smoke above candle
        const rect = candle.getBoundingClientRect();
        smoke.style.left = `${rect.left + rect.width / 2}px`;
        smoke.style.top = `${rect.top - 10}px`;
        document.body.appendChild(smoke);
        gsap.to(smoke, {
          y: -30,
          x: Math.random() * 20 - 10,
          opacity: 0.3,
          scale: 2,
          duration: 2,
          onComplete: () => smoke.remove(),
        });
      }

      // Show smoke only before click
      let smokeInterval = setInterval(createSmoke, 500);

      function startCelebration() {
        if (isClicked) return;
        isClicked = true;
        // Play background song on first interaction
        playBgSong();
        // Hide click message
        if (clickMessage) clickMessage.style.opacity = 0;
        // Play candle blowing sound
        if (blowSound) {
          blowSound.currentTime = 0;
          blowSound.play().catch((e) => {});
        }
        // Stop smoke
        clearInterval(smokeInterval);
        // Create background particles
        createBackgroundParticles();
        // Make cake bounce
        gsap.to(cake, {
          y: -20,
          duration: 0.3,
          repeat: 1,
          yoyo: true,
          ease: "power2.out",
        });
        // Fade out candle/flame
        if (flame) {
          gsap.to(flame, {
            scale: 2,
            opacity: 0,
            duration: 0.5,
            ease: "power2.out",
          });
        }
        if (candle) {
          gsap.to(candle, {
            opacity: 0,
            y: -30,
            duration: 1,
            delay: 0.2,
            ease: "back.in(1.7)",
            onComplete: () => candle.remove(),
          });
        }
        // Start balloon and confetti rain
        const balloonInterval = setInterval(() => {
          for (let i = 0; i < 2; i++) {
            setTimeout(() => createBalloon(), i * 200);
          }
        }, 400);
        const confettiInterval = setInterval(() => {
          for (let i = 0; i < 10; i++) {
            setTimeout(() => createConfetti(), i * 50);
          }
        }, 300);
        // Show next page button with fancy animation
        setTimeout(() => {
          const nextButton = document.querySelector(".next-page-button");
          nextButton.classList.add("show");
          gsap.fromTo(
            nextButton,
            { y: 50, opacity: 0 },
            { y: 0, opacity: 1, duration: 1, ease: "elastic.out(1, 0.5)" }
          );
        }, 1500);
        // Stop particle effects after some time
        setTimeout(() => {
          clearInterval(balloonInterval);
          clearInterval(confettiInterval);
        }, 6000);
      }

      // Add button click handler
      document
        .querySelector(".next-page-button")
        .addEventListener("click", () => {
          document.body.style.opacity = 0;
          document.body.style.transition = "opacity 0.5s ease";
          setTimeout(() => {
            window.location.href = "song.html";
          }, 500);
        });

      // Animate cake entrance
      gsap.fromTo(
        "#mainCake",
        { y: 100, scale: 0.7, opacity: 0 },
        {
          y: 0,
          scale: 1,
          opacity: 1,
          duration: 1.2,
          ease: "elastic.out(1, 0.6)",
        }
      );

      // Floating hearts effect
      function createHeart() {
        const hearts = [
          "#ff71b6",
          "#ff4081",
          "#ffb7e0",
          "#ff8ac7",
          "#ffc4e6",
          "#ffa3d4",
          "#fffde7",
          "#ffd700",
        ];
        const heart = document.createElement("div");
        heart.className = "floating-heart";
        heart.style.left = Math.random() * 90 + 5 + "vw";
        heart.style.bottom = "-40px";
        heart.innerHTML = `<svg width="32" height="32" viewBox="0 0 32 32" fill="${
          hearts[Math.floor(Math.random() * hearts.length)]
        }" xmlns="http://www.w3.org/2000/svg"><path d="M23.6 5.6c-2.1 0-4.1 1-5.6 2.7C16.5 6.6 14.5 5.6 12.4 5.6 8.6 5.6 5.6 8.6 5.6 12.4c0 6.2 10.4 13.2 10.9 13.5.2.1.5.1.7 0 .5-.3 10.9-7.3 10.9-13.5 0-3.8-3-6.8-6.8-6.8z"/></svg>`;
        document.getElementById("hearts-container").appendChild(heart);
        setTimeout(() => heart.remove(), 4000);
      }
      setInterval(createHeart, 900);

      // Cake click/touch effect
      cake.addEventListener("click", startCelebration);
      cake.addEventListener("touchstart", startCelebration);
    </script>
    <script src="shared.js"></script>
  </body>
</html>


